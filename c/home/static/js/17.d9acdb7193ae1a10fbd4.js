webpackJsonp([17],{"5sxp":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("vLgD"),o={getList:function(){return Object(l.a)({url:"/gathering",method:"get"})}},i=function(){return Object(l.a)({url:"/city",method:"get"})},s=a("NxjZ"),n={handlerShowMessage:function(e,t){e.then(function(e){!0===e.flag?(Object(s.Message)({message:e.message,type:"success"}),t.loadData(),t.dialogFormVisible=!1):Object(s.Message)({message:e.message,type:"error"})})}},r={data:function(){return{list:null,listLoading:!0,currentPage:1,total:0,searchMap:{},dialogFormVisible:!1,pojo:{},cityList:[],id:""}},created:function(){this.loadData(),this.loadCityData()},methods:{loadData:function(){var e=this;this.listLoading=!0,o.search(this.currentPage,10,this.searchMap).then(function(t){1==t.flag&&(e.list=t.data.rows,e.total=t.data.total),e.listLoading=!1})},handleAdd:function(){this.dialogFormVisible=!0},handleEdit:function(e){var t=this;this.dialogFormVisible=!0,this.id=e,""!=this.id?o.findById(this.id).then(function(e){1==e.flag&&(t.pojo=e.data)}):this.pojo={}},handleSave:function(){""!=this.id?n.handleShowMessage(o.update(this.id,this.pojo),this):n.handleShowMessage(o.save(this.pojo),this)},handleRemove:function(e){var t=this;this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){""!=e&&n.handleShowMessage(o.deleteById(e),t)})},handleShowMessage:function(e){1==e.flag?(this.$message({message:e.message,type:"success"}),this.loadData(),this.dialogFormVisible=!1):this.$message({message:e.message,type:"error"})},loadCityData:function(){var e=this;i().then(function(t){e.cityList=t.data})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",[a("el-col",{attrs:{span:6}},[a("span",[a("el-button",{staticStyle:{margin:"10px"},attrs:{type:"primary",round:""},on:{click:e.handleAdd}},[a("i",{staticClass:"el-icon-plus"})])],1)]),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{margin:"10px",height:"45px"},attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{attrs:{placeholder:"活动名称"},model:{value:e.searchMap.name,callback:function(t){e.$set(e.searchMap,"name",t)},expression:"searchMap.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择开始日期"},model:{value:e.searchMap.starttime,callback:function(t){e.$set(e.searchMap,"starttime",t)},expression:"searchMap.starttime"}}),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择截止日期"},model:{value:e.searchMap.endtime,callback:function(t){e.$set(e.searchMap,"endtime",t)},expression:"searchMap.endtime"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.loadData}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"活动名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"活动地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",label:"截止日期"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){e.handleEdit(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"small"},on:{click:function(a){e.handleRemove(t.row.id)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.loadData}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.pojo,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{model:{value:e.pojo.name,callback:function(t){e.$set(e.pojo,"name",t)},expression:"pojo.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"基本地点"}},[a("el-input",{model:{value:e.pojo.address,callback:function(t){e.$set(e.pojo,"address",t)},expression:"pojo.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.pojo.starttime,callback:function(t){e.$set(e.pojo,"starttime",t)},expression:"pojo.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"截止日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.pojo.endtime,callback:function(t){e.$set(e.pojo,"endtime",t)},expression:"pojo.endtime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"报名截止"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.pojo.enrolltime,callback:function(t){e.$set(e.pojo,"enrolltime",t)},expression:"pojo.enrolltime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动详情"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.pojo.detail,callback:function(t){e.$set(e.pojo,"detail",t)},expression:"pojo.detail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"城市"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.pojo.city,callback:function(t){e.$set(e.pojo,"city",t)},expression:"pojo.city"}},e._l(e.cityList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否可见",prop:"delivery"}},[a("el-switch",{attrs:{"on-text":"","off-text":"","active-value":"1","inactive-value":"0"},model:{value:e.pojo.status,callback:function(t){e.$set(e.pojo,"status",t)},expression:"pojo.status"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]},d=a("VU/8")(r,c,!1,null,null,null);t.default=d.exports}});